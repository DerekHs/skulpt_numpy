function createRkState(n,e,i,t,r,a,l,u,o,s,_,k,S,f,c,m,b,h,p){return{key:n||new Array(RK_STATE_LEN),pos:e||null,gauss:null,has_gauss:i||null,has_binomial:t||null,psave:r||null,nsave:a||null,r:l||null,q:u||null,fm:o||null,m:s||null,p1:_||null,xm:k||null,xl:S||null,xr:f||null,laml:c||null,lamr:m||null,p2:b||null,p3:h||null,p4:p||null}}function rk_hash(n){return rk_hash_uint[0]=0|n,rk_hash_uint[0]+=~(rk_hash_uint[0]<<15),rk_hash_uint[0]^=rk_hash_uint[0]>>>10,rk_hash_uint[0]+=rk_hash_uint[0]<<3,rk_hash_uint[0]^=rk_hash_uint[0]>>>6,rk_hash_uint[0]+=~(rk_hash_uint[0]<<11),rk_hash_uint[0]^=rk_hash_uint[0]>>>16,rk_hash_uint[0]>>>0}function rk_seed(n,e){var i,t;for(e.key[0]=n>>>0,i=1;RK_STATE_LEN>i;i++)t=e.key[i-1]^e.key[i-1]>>>30,e.key[i]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+i,e.key[i]>>>=0;e.pos=RK_STATE_LEN,e.gauss=0,e.has_gauss=0,e.has_binomial=0}function rk_randomseed(n){var e,i;if(rk_devfill(n.key,4,0)===rk_error.RK_NOERR){for(n.key[0]|=2147483648,n.pos=RK_STATE_LEN,n.gauss=0,n.has_gauss=0,n.has_binomial=0,e=0;624>e;e++)n.key[e]&=4294967295;return rk_error.RK_NOERR}return i=new Date,rk_seed(rk_hash(i.getTime())^rk_hash(i.getMilliseconds()),n),rk_error.RK_ENODEV}function rk_random(n){var e;if(n.pos===RK_STATE_LEN){var i;for(i=0;N-M>i;i++)e=n.key[i]&UPPER_MASK|n.key[i+1]&LOWER_MASK,n.key[i]=n.key[i+M]^e>>>1^-(1&e)&MATRIX_A;for(;N-1>i;i++)e=n.key[i]&UPPER_MASK|n.key[i+1]&LOWER_MASK,n.key[i]=n.key[i+(M-N)]^e>>>1^-(1&e)&MATRIX_A;e=n.key[N-1]&UPPER_MASK|n.key[0]&LOWER_MASK,n.key[N-1]=n.key[M-1]^e>>>1^-(1&e)&MATRIX_A,n.pos=0}return e=n.key[n.pos++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,e^=e>>>18,e>>>0}function rk_ulong(n){return rk_random(n)}function rk_long(n){return rk_ulong(n)>>>1}function rk_interval(n,e){var i,t=n;if(0===n)return 0;if(t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,4294967295>=n)for(;(i=rk_random(e)&t)>n;);else for(;(i=rk_ulong(e)&t)>n;);return i}function rk_double(n){var e=rk_random(n)>>>5,i=rk_random(n)>>>6;return(67108864*e+i)*(1/9007199254740992)}function rk_fill(n,e,i){for(var t,r=new Int32Array(n),a=0;e>=4;e-=4)t=rk_random(i),r[a++]=255&t,r[a++]=t>>>8&255,r[a++]=t>>>16&255,r[a++]=t>>>24&255;if(e)for(t=rk_random(i);e;t>>>=8,e--)r[a++]=255&t}function rk_devfill(n,e,i){return rk_error.RK_ENODEV}function rk_altfill(n,e,i,t){var r;return r=rk_devfill(n,e,i),r&&rk_fill(n,e,t),r}function rk_gauss(n){if(n.has_gauss){var e=n.gauss;return n.gauss=0,n.has_gauss=0,e}var i,t,r,a;do t=2*rk_double(n)-1,r=2*rk_double(n)-1,a=t*t+r*r;while(a>=1||0===a);return i=Math.sqrt(-2*Math.log(a)/a),n.gauss=i*t,n.has_gauss=1,i*r}function init_genrand(n,e){var i,t=n.key;for(t[0]=4294967295&e,i=1;RK_STATE_LEN>i;i++)t[i]=1812433253*(t[i-1]^t[i-1]>>>30)+i,t[i]&=4294967295;n.pos=i}function init_by_array(n,e,i){var t,r=1,a=0,l=n.key;for(init_genrand(n,19650218),t=RK_STATE_LEN>i?RK_STATE_LEN:i;t;t--)l[r]=(l[r]^1664525*(l[r-1]^l[r-1]>>>30))+e[a]+a,l[r]&=4294967295,r++,a++,r>=RK_STATE_LEN&&(l[0]=l[RK_STATE_LEN-1],r=1),a>=i&&(a=0);for(t=RK_STATE_LEN-1;t;t--)l[r]=(l[r]^1566083941*(l[r-1]^l[r-1]>>>30))-r,l[r]&=4294967295,r++,r>=RK_STATE_LEN&&(l[0]=l[RK_STATE_LEN-1],r=1);l[0]=2147483648,n.gauss=0,n.has_gauss=0,n.has_binomial=0}function rk_binomial_btpe(n,e,i){var t,r,a,l,u,o,s,_,k,S,f,c,m,b,h,p,d,v,w,g,y,E,R,A,T,M,N,$,K,O,L,V,x,J,P;1!==n.has_binomial||n.nsave!=e||n.psave!=i?(n.nsave=e,n.psave=i,n.has_binomial=1,n.r=t=Math.min(i,1-i),n.q=r=1-t,n.fm=a=e*t+t,n.m=V=Math.floor(n.fm),n.p1=l=Math.floor(2.195*Math.sqrt(e*t*r)-4.6*r)+.5,n.xm=u=V+.5,n.xl=o=u-l,n.xr=s=u+l,n.c=_=.134+20.5/(15.3+V),b=(a-o)/(a-o*t),n.laml=k=b*(1+b/2),b=(s-a)/(s*r),n.lamr=S=b*(1+b/2),n.p2=f=l*(1+2*_),n.p3=c=f+_/k,n.p4=m=c+_/S):(t=n.r,r=n.q,a=n.fm,V=n.m,l=n.p1,u=n.xm,o=n.xl,s=n.xr,_=n.c,k=n.laml,S=n.lamr,f=n.p2,c=n.p3,m=n.p4);var C="Step10";n:for(;C;)switch(C){case"Step10":if(E=e*t*r,h=rk_double(n)*m,p=rk_double(n),h>l){C="Step20";continue n}x=Math.floor(u-l*p+h),C="Step60";continue n;case"Step20":if(h>f){C="Step30";continue n}if(L=o+(h-l)/_,p=p*_+1-Math.abs(V-L+.5)/l,p>1){C="Step10";continue n}x=Math.floor(L),C="Step50";continue n;case"Step30":if(h>c){C="Step40";continue n}if(x=Math.floor(o+Math.log(p)/k),0>x){C="Step10";continue n}p=p*(h-f)*k,C="Step50";continue n;case"Step40":if(x=Math.floor(s-Math.log(p)/S),x>e){C="Step10";continue n}p=p*(h-c)*S;case"Step50":if(J=Math.abs(x-V),J>20&&E/2-1>J){C="Step52";continue n}if(d=t/r,b=d*(e+1),v=1,x>V)for(P=V+1;x>=P;P++)v*=b/P-d;else if(V>x)for(P=x+1;V>=P;P++)v/=b/P-d;if(p>v){C="Step10";continue n}C="Step60";continue n;case"Step52":if(w=J/E*((J*(J/3+.625)+.16666666666666666)/E+.5),g=-J*J/(2*E),y=Math.log(p),g-w>y){C="Step60";continue n}if(y>g+w){C="Step10";continue n}if(R=x+1,T=V+1,N=e+1-V,K=e-x+1,A=R*R,M=T*T,$=N*N,O=K*K,y>u*Math.log(T/R)+(e-V+.5)*Math.log(N/K)+(x-V)*Math.log(K*t/(R*r))+(13680-(462-(132-(99-140/M)/M)/M)/M)/T/166320+(13680-(462-(132-(99-140/$)/$)/$)/$)/N/166320+(13680-(462-(132-(99-140/A)/A)/A)/A)/R/166320+(13680-(462-(132-(99-140/O)/O)/O)/O)/K/166320){C="Step10";continue n}case"Step60":i>.5&&(x=e-x),C=!1;break;default:console.log("unhandeled case: "+C)}return x}function rk_binomial_inversion(n,e,i){var t,r,a,l,u,o,s;for(1!==n.has_binomial||n.nsave!=e||n.psave!=i?(n.save=e,n.psave=i,n.has_binomial=1,n.q=t=1-i,n.r=r=Math.exp(e*Math.log(t)),n.c=a=e*i,n.m=s=Math.min(e,a+10*Math.sqrt(a*t+1))):(t=n.q,r=n.r,a=n.c,s=n.m),o=0,l=r,u=rk_double(n);u>l;)o++,o>s?(o=0,l=r,u=rk_double(n)):(u-=l,l=(e-o+1)*i*l/(o*t));return o}function rk_binomial(n,e,i){var t;return.5>=i?30>=i*e?rk_binomial_inversion(n,e,i):rk_binomial_btpe(n,e,i):(t=1-i,30>=t*e?e-rk_binomial_inversion(n,e,t):e-rk_binomial_btpe(n,e,t))}function cont0_array(n,e,i,t){var r,a,l,u;if(Sk.builtin.checkNone(i))return new Sk.builtin.float_(e.call(null,n));for(a=Sk.misceval.callsim(np.$d.empty,i,Sk.builtin.float_),l=a.v.buffer.length,r=a.v.buffer,u=0;l>u;u++)r[u]=new Sk.builtin.float_(e.call(null,n));return a}function cont1_array_sc(n,e,i,t,r){}function discnp_array_sc(n,e,i,t,r,a){var l,u,o,s=[],_=Sk.ffi.remapToJs(t),k=Sk.ffi.remapToJs(r);if(Sk.builtin.checkNone(i))return new Sk.builtin.int_(e(n,_,k));for(l=Sk.misceval.callsim(np.$d.empty,i,Sk.builtin.int_),u=Sk.builtin.len(l).v,s=l.v.buffer,o=0;u>o;o++)s[o]=new Sk.builtin.int_(e(n,_,k));return l}function discnp_array(n,e,i,t,r,a){var l,u,o,s,_,k,S,f=[];if(Sk.builtin.checkNone(i)){_=null;var c=new Sk.builtin.tuple(t.v.shape.map(function(n){return new Sk.builtin.int_(n)}));if(l=Sk.misceval.callsim(np.$d.empty,c,Sk.builtin.int_),f=l.v.buffer,k=t.v.buffer,S=r.v.buffer,S.length!==k.length)if(1===S.length)for(u=1;u<k.length;u++)S.push(S[0]);else{if(1!==k.length)throw new Sk.builtin.ValueError("cannot broadcast n and p to a common shape");for(u=1;u<S.length;u++)k.push(k[0])}for(u=0;u<f.length;u++)s=Sk.ffi.remapToJs(k[u]),o=Sk.ffi.remapToJs(S[u]),f[u]=new Sk.builtin.int_(e(n,s,o))}else{if(l=Sk.misceval.callsim(np.$d.empty,i,Sk.builtin.int_),f=l.v.buffer,k=t.v.buffer,S=r.v.buffer,f.length!==k.length&&f.length!==S.length)throw new Sk.builtin.ValueError("size is not compatible with inputs");for(u=0;u<f.length;u++)s=Sk.ffi.remapToJs(k[u]),o=Sk.ffi.remapToJs(S[u]),f[u]=new Sk.builtin.int_(e(n,s,o))}return l}function PyArray_FROM_OTF(n,e,i){return Sk.misceval.callsim(np.$d.array,n,e)}Sk.misceval.tryCatch=Sk.misceval.tryCatch||function(n,e){var i;try{i=n()}catch(t){return e(t)}if(i instanceof Sk.misceval.Suspension){var r=new Sk.misceval.Suspension(void 0,i);return r.resume=function(){return Sk.misceval.tryCatch(i.resume,e)},r}return i};var RK_STATE_LEN=624,rk_error={RK_NOERR:"RK_NOERR",RK_ENODEV:"RK_ENODEV",RK_ERR_MAX:"RK_ERR_MAX"},rk_strerror=["no error","random device unavailable"],RK_MAX=4294967296,rk_hash_uint;rk_hash_uint=void 0===typeof Uint32Array?[0]:new Uint32Array(1);var N=624,M=397,MATRIX_A=2567483615,UPPER_MASK=2147483648,LOWER_MASK=2147483647,rk_state={key:[],pos:null,has_gauss:null,gauss:null},np=Sk.importModule("numpy"),CLASS_RANDOMSTATE="RandomState",$builtinmodule=function(n){var e={},i=function(n,e){var i=function(n,e){null==e&&(e=Sk.builtin.none.none$),n.internal_state=createRkState(),n.poisson_lam_max=new Sk.builtin.int_(Math.pow(2,53)-1),n.lock=null,Sk.misceval.callsim(n.seed,n,e)};i.co_varnames=["self","seed"],i.$defaults=[Sk.builtin.none.none$],e.__init__=new Sk.builtin.func(i),e.seed=new Sk.builtin.func(function(n,e){null==e&&(e=Sk.builtin.none.none$);var i,t;try{if(Sk.builtin.checkNone(e))i=rk_randomseed(n.internal_state);else{var r=new Sk.builtin.int_(Sk.misceval.asIndex(e)),a=Sk.ffi.remapToJs(r);if(a>Math.pow(2,32)-1||0>a)throw new Sk.builtin.ValueError("Seed must be between 0 and 4294967295");rk_seed(a,n.internal_state)}}catch(l){if(!(l instanceof Sk.builtin.TypeError))throw l;t=Sk.misceval.callsim(np.$d.asarray,e,Sk.builtin.int_),t.v.buffer.map(function(n){if(n>Math.pow(2,32)-1||0>n)throw new Sk.builtin.ValueError("Seed must be between 0 and 4294967295")}),init_by_array(n.internal_state,t.v.buffer,t.v.shape[0])}}),e.set_state=new Sk.builtin.func(function(n){}),e.get_state=new Sk.builtin.func(function(n){var e=n.internal_state.key.map(function(n){return new Sk.builtin.int_(n)}),i=obj=Sk.misceval.callsim(np.$d.asarray,new Sk.builtin.tuple(e),Sk.builtin.int_),t=new Sk.builtin.int_(n.internal_state.has_gauss),r=new Sk.builtin.float_(n.internal_state.gauss),a=new Sk.builtin.int_(n.internal_state.pos);return new Sk.builtin.tuple([new Sk.builtin.str("MT19937"),i,a,t,r])});var t=function(n,e){null==e&&(e=Sk.builtin.none.none$);var i=cont0_array(n.internal_state,rk_double,e,n.lock);return i};t.co_varnames=["self","size"],t.$defaults=[Sk.builtin.none.none$],e.random_sample=new Sk.builtin.func(t);var r=function(n,e){throw new NotImplementedError("RandomState.tomaxint")};r.co_varnames=["self","size"],r.$defaults=[Sk.builtin.none.none$],e.tomaxint=new Sk.builtin.func(r);var a=function(n,e,i,t){Sk.builtin.pyCheckArgs("randint",arguments,1,3,!0),null==t&&(t=Sk.builtin.none.none$);var r,a,l,u,o,s,_,k=[];if(null==i||Sk.builtin.checkNone(i)?(r=new Sk.builtin.int_(0),a=new Sk.builtin.int_(e)):(r=new Sk.builtin.int_(e),a=new Sk.builtin.int_(i)),r=Sk.ffi.remapToJs(r),a=Sk.ffi.remapToJs(a),r>=a)throw new Sk.builtin.ValueError("low >= high");if(u=Math.abs(a-r-1),Sk.builtin.checkNone(t))return l=new Sk.builtin.int_(r+rk_interval(u,n.internal_state));for(o=Sk.misceval.callsim(np.$d.empty,t,Sk.builtin.int_),s=Sk.builtin.len(o).v,k=o.v.buffer,_=0;s>_;_++)l=r+rk_interval(u,n.internal_state),k[_]=new Sk.builtin.int_(l);return o};a.co_varnames=["self","low","high","size"],a.$defaults=[Sk.builtin.none.none$,Sk.builtin.none.none$,Sk.builtin.none.none$],e.randint=new Sk.builtin.func(a);var l=function(n,e,i,t){return(null==i||Sk.builtin.checkNone(i))&&(i=e,e=new Sk.builtin.int_(1)),Sk.misceval.callsim(n.randint,n,e,sum=Sk.abstr.numberBinOp(i,new Sk.builtin.int_(1),"Add"),t)};l.co_varnames=["self","low","high","size"],l.$defaults=[Sk.builtin.none.none$,Sk.builtin.none.none$,Sk.builtin.none.none$],e.random_integers=new Sk.builtin.func(l),e.rand=new Sk.builtin.func(function(n){return args=new Sk.builtins.tuple(Array.prototype.slice.call(arguments,1)),0===args.v.length?Sk.misceval.callsim(n.random_sample,n):Sk.misceval.callsim(n.random_sample,n,args)});var u=function(n,e,i,t){Sk.builtin.pyCheckArgs("binomial",arguments,2,3,!0);var r,a,l,u;null==t&&(t=Sk.builtin.none.none$);var o=null;try{u=Sk.ffi.remapToJs(new Sk.builtin.float_(i)),l=Sk.ffi.remapToJs(new Sk.builtin.int_(e))}catch(s){o=s}if(null===o){if(0>l)throw new Sk.builtin.ValueError("n < 0");if(0>u)throw new Sk.builtin.ValueError("p < 0");if(u>1)throw new Sk.builtin.ValueError("p > 1");if(isNaN(u))throw new Sk.builtin.ValueError("p is nan");return discnp_array_sc(n.internal_state,rk_binomial,t,l,u,n.lock)}r=PyArray_FROM_OTF(e,Sk.builtin.int_),a=PyArray_FROM_OTF(i,Sk.builtin.float_);var _=new Sk.builtin.int_(0);if(Sk.misceval.callsim(np.$d.any,Sk.misceval.callsim(np.$d.less,e,_))==Sk.builtin.bool.true$)throw new Sk.builtin.ValueError("n < 0");if(Sk.misceval.callsim(np.$d.any,Sk.misceval.callsim(np.$d.less,i,_))==Sk.builtin.bool.true$)throw new Sk.builtin.ValueError("p < 0");if(Sk.misceval.callsim(np.$d.any,Sk.misceval.callsim(np.$d.greater,i,new Sk.builtin.int_(1)))==Sk.builtin.bool.true$)throw new Sk.builtin.ValueError("p > 1");return discnp_array(n.internal_state,rk_binomial,t,r,a,n.lock)};e.binomial=new Sk.builtin.func(u);var o=function(n,e){throw new NotImplementedError("RandomState.bytes")};e.bytes=new Sk.builtin.func(o);var s=function(n,e){throw new NotImplementedError("RandomState.choice")};e.choice=new Sk.builtin.func(s);var _=function(n,e){throw new NotImplementedError("RandomState.uniform")};e.uniform=new Sk.builtin.func(_),e.randn=new Sk.builtin.func(function(n){return args=new Sk.builtins.tuple(Array.prototype.slice.call(arguments,1)),0===args.v.length?Sk.misceval.callsim(n.standard_normal,n):Sk.misceval.callsim(n.standard_normal,n,args)}),e.tp$getattr=Sk.builtin.object.prototype.GenericGetAttr,e.tp$setattr=Sk.builtin.object.prototype.GenericSetAttr};return e[CLASS_RANDOMSTATE]=Sk.misceval.buildClass(e,i,CLASS_RANDOMSTATE,[]),e._rand=Sk.misceval.callsim(e[CLASS_RANDOMSTATE]),e.rand=Sk.abstr.gattr(e._rand,"rand",!0),e.seed=Sk.abstr.gattr(e._rand,"seed",!0),e.random_sample=Sk.abstr.gattr(e._rand,"random_sample",!0),e.random=e.random_sample,e.sample=e.random_sample,e.binomial=Sk.abstr.gattr(e._rand,"binomial",!0),e.randint=Sk.abstr.gattr(e._rand,"randint",!0),e.random_integers=Sk.abstr.gattr(e._rand,"random_integers",!0),e};